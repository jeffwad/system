define("/lib/dom",["object","iter","string","/lib/uuid","/lib/sly"],function(a,b,c){var d=a("object"),e=a("iter"),f=a("string"),g=a("/lib/uuid"),h=a("/lib/sly").Sly,i=e.forEach,j=e.reduce,k=e.map,l=f.trim,m=f.camelCase,n,o,p,q,r,s,t;typeof document.ELEMENT_NODE=="undefined"&&(document.ELEMENT_NODE=1,document.ATTRIBUTE_NODE=2,document.TEXT_NODE=3,document.CDATA_SECTION_NODE=4,document.ENTITY_REFERENCE_NODE=5,document.ENTITY_NODE=6,document.PROCESSING_INSTRUCTION_NODE=7,document.COMMENT_NODE=8,document.DOCUMENT_NODE=9,document.DOCUMENT_TYPE_NODE=10,document.DOCUMENT_FRAGMENT_NODE=11,document.NOTATION_NODE=12),n=function(){var a={};return function(b,c){c=c||"";var d=a[b+c];return d||(d=a[b+c]=new RegExp(b,c)),d}}(),q=function(){var a,b;return a={start:function(a){this.isActive||(this.obj.addEventListener(this.type,this.func,a||!1),this.isActive=!0)},stop:function(a){this.isActive===!0&&(this.obj.removeEventListener(this.type,this.func,a||!1),this.isActive=!1)}},function(b,c,e){var f;return f=d(a,{obj:b,type:c,func:e}),f.start(),f}}(),r={on:function(){var a=function(a,b,c){typeof c!="undefined"?a[c][b]():i(a,function(a){a[b]()})};return function(){var b=arguments[0],c=arguments[1],d,e,f;return arguments.length===3&&(d=arguments[1],e=arguments[2],c=function(a){var b=a.target;while(b){if(h.match(d,b)){a.boundTarget=b,e.call(b,a);break}b=b.parentNode}}),f=k(this,function(a){return q(a,b,c)}),{stop:function(b){a(f,"stop",b)},start:function(b){a(f,"start",b)}}}}()},p={hasAttribute:function(a,b,c){a=window.ActiveXObject&&a==="class"?"className":a;var d,e,f=this[0];switch(!0){case b===!1||b===undefined||b==="":return!!f.hasAttribute(a);case b==="~=":return f.getAttribute(a).indexOf(c)!==-1?!0:!1;default:return b==="="&&(e=n("(^| |%20)"+c+"(%20| |$)")),b==="^="&&(e=n("^"+c)),b==="$="&&(e=n(c+"$")),!!e.test(f.getAttribute(a))}},hasClass:function(a){return this.hasAttribute("class","=",a)?!0:!1},addClass:function(a){var b=n(""+a+"","gi");return i(this,function(c){c.className+=c.className.match(b)?"":c.className.length>0?" "+a:a}),this},removeClass:function(a){var b=n("^(.*?)"+a+"(.*)","i");return i(this,function(a){a.className=l(a.className.replace(b,"$1$2")).replace("  "," ")}),this},getStyle:function(a){return document.defaultView.getComputedStyle(this[0],"").getPropertyValue(m(a))},show:function(a){a=a||"block";var b=this;return i(this,function(b){b.style.display=a}),this},hide:function(){return this.show("none")},toggle:function(a){a=a||"block";var b=this;return i(this,function(c){c.style.display=b.getStyle("display")==="none"?a:"none"}),this},innerHTML:function(a){return i(this,function(b){b.innerHTML=a}),this},value:function(){return this[0].value}},s={length:0,push:function(a){this[this.length++]=a}},t=d.create(d.create(d.create(s,r),p),{toString:function(){return j([],this,function(a,b){return a.push(b),a}).join(",")}}),b.$=function(a,b){var c,e,f,g=!1;if(typeof a=="string"){g=d.create(t),c=h.search(a,b||!1);for(e=0,f=c.length;e<f;e++)g.push(c[e])}else if(a.nodeType===document.ELEMENT_NODE||a===document||a===document.body)g=d.create(t),g.push(a);return g}})